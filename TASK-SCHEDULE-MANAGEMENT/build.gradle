/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
plugins {
    id 'java'
}

group 'cn.ac.iie'
version 'v1.0'

sourceCompatibility = 1.8

archivesBaseName = 'tsm'

repositories {
    jcenter()
}

dependencies {

    testCompile group: 'junit', name: 'junit', version: '4.12'

    compileOnly('org.projectlombok:lombok:1.18.8')
    annotationProcessor 'org.projectlombok:lombok:1.18.8'
    
    compile 'redis.clients:jedis:2.9.0'

    compile 'io.javalin:javalin:3.5.0'
    
    compile 'com.alibaba:fastjson:1.2.62'

    compile 'com.rabbitmq:amqp-client:5.9.0'

    compile 'commons-io:commons-io:2.6'

    compile 'org.yaml:snakeyaml:1.23'

    compile 'org.slf4j:slf4j-simple:1.7.26'

    compile fileTree(dir: 'olib')
}

jar {
    // from {
    //     //添加依懒到打包文件
    //     configurations.runtime.collect { zipTree(it) }
    // }

    manifest {
        attributes 'Main-Class': 'cn.ac.iie.server.TSMServer'
        attributes "Class-Path": configurations.compile.collect { "lib/${it.name}" }.join(' ')
    }
}

task copyJar(type: Copy) {
    from configurations.runtime
    into('build/libs/lib')
}